(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(module,exports,__webpack_require__){module.exports={root:"app-footer_root_1efuJ",footer:"app-footer_footer_1zfPX"}},122:function(module,exports,__webpack_require__){module.exports={root:"app-content-view_root_2ks-Q",table:"app-content-view_table_1-1ZG"}},166:function(module,exports,__webpack_require__){module.exports={root:"content_root_3_0hy"}},167:function(module,exports,__webpack_require__){module.exports={root:"header_root_3llYM"}},168:function(module,exports,__webpack_require__){module.exports={root:"footer_root_3wwho"}},169:function(module,exports,__webpack_require__){module.exports={root:"layout_root_5suHm"}},182:function(module,exports,__webpack_require__){module.exports={root:"tabs_root_3EpLE"}},195:function(module,exports,__webpack_require__){},27:function(module,exports,__webpack_require__){module.exports={icon:"pages_icon_1cdeh","button-group":"pages_button-group_20teo",buttonGroup:"pages_button-group_20teo","button-item":"pages_button-item_8PbWx",buttonItem:"pages_button-item_8PbWx"}},378:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);function Content(_a){var children=_a.children;return react_default.a.createElement("main",{className:content_default.a.root},children)}function Header(_a){var children=_a.children;return react_default.a.createElement("header",{className:header_default.a.root},children)}function Footer(_a){var children=_a.children;return react_default.a.createElement("footer",{className:footer_default.a.root},children)}function Layout(_a){var children=_a.children;return react_default.a.createElement("div",{className:layout_default.a.root},children)}function GET_WEATHER_ICON(name){return"http://openweathermap.org/img/wn/"+name+"@2x.png"}function addCitySuccess(city){return{type:"ADD_CITY_SUCCESS",payload:{city:city}}}function setPending(switched){return{type:"SET_PENDING",payload:{switched:switched}}}function citiesSelector(state){return state.cities}function searchSelector(state){return state.search}function getHistory(){return history_history}var react=__webpack_require__(0),react_default=__webpack_require__.n(react),react_dom=__webpack_require__(4),react_router=__webpack_require__(90),root=__webpack_require__(183),esm=__webpack_require__(61),es=__webpack_require__(20),content_content=(__webpack_require__(195),__webpack_require__(166)),content_default=__webpack_require__.n(content_content),header=__webpack_require__(167),header_default=__webpack_require__.n(header),footer=__webpack_require__(168),footer_default=__webpack_require__.n(footer),layout=__webpack_require__(169),layout_default=__webpack_require__.n(layout),redux=__webpack_require__(52),redux_logger=__webpack_require__(170),redux_thunk_es=__webpack_require__(171),axios=__webpack_require__(172),axios_default=__webpack_require__.n(axios),addCityError=function(error){return{type:"ADD_CITY_ERROR",payload:{error:error}}},__assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__spreadArrays=function(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r},initState={list:[],isPending:!1,error:""},cities={cities:function(state,action){switch(void 0===state&&(state=initState),action.type){case"ADD_CITY_SUCCESS":var list=state.list,city_1=action.payload.city;city_1.position=list.length;var newList=[];return newList=list.filter(function(item){return item.id===city_1.id}).length?list.map(function(item){return item.id===city_1.id&&(item.name=city_1.name,item.temperature=city_1.temperature,item.icon=city_1.icon),item}):__spreadArrays(list,[city_1]),__assign(__assign({},state),{error:"",list:newList});case"ADD_CITY_ERROR":var error=action.payload.error;return __assign(__assign({},state),{error:error});case"MOVE_UP_CITY":var id_1=action.payload.id;newList=(list=state.list).map(function(city){return city.id===id_1&&city.position++,city});return __assign(__assign({},state),{list:__spreadArrays(newList)});case"MOVE_DOWN_CITY":var id_2=action.payload.id;newList=(list=state.list).map(function(city){return city.id===id_2&&city.position--,city});return __assign(__assign({},state),{list:__spreadArrays(newList)});case"REMOVE_CITY":var id_3=action.payload.id;newList=(list=state.list).map(function(city){return city.id===id_3&&(city.isDeleted=!0),city});return __assign(__assign({},state),{list:__spreadArrays(newList)});case"RESTORE_CITY":var id_4=action.payload.id;newList=(list=state.list).map(function(city){return city.id===id_4&&(city.isDeleted=!1),city});return __assign(__assign({},state),{list:__spreadArrays(newList)});case"SET_PENDING":var switched=action.payload.switched;return __assign(__assign({},state),{isPending:switched});default:return state}}},reducer_assign=function(){return(reducer_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},reducer_initState={query:""},search={search:function(state,action){switch(void 0===state&&(state=reducer_initState),action.type){case"CHANGE_SEARCH_QUERY":var query=action.payload.query;return reducer_assign(reducer_assign({},state),{query:query});case"CLEAR_QUERY":return reducer_initState;default:return state}}},root_reducer_assign=function(){return(root_reducer_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},root_reducer=function(history){return Object(redux.c)(root_reducer_assign(root_reducer_assign({router:Object(esm.b)(history)},cities),search))},middleware=__webpack_require__(133),esm_history=__webpack_require__(37),history_history=Object(esm_history.a)(),store_history=getHistory(),middlewares=[];middlewares.push(Object(middleware.a)(store_history)),middlewares.push(redux_thunk_es.a);Object(redux_logger.createLogger)({collapsed:!0,diff:!0});function Table(_a){var dataSource=_a.dataSource,columns=_a.columns,loading=_a.loading;return react_default.a.createElement(table.a,{dataSource:dataSource,columns:columns,bordered:!0,pagination:!1,size:"small",rowKey:function(record){return record.id},loading:loading})}function Button(_a){var disabled=_a.disabled,icon=_a.icon,size=_a.size,type=_a.type,children=_a.children,_b=_a.onClick,onClick=void 0===_b?function(){return!1}:_b,_c=_a.className,className=void 0===_c?"":_c;return react_default.a.createElement(es_button.a,{disabled:disabled,icon:icon,size:size,type:type,onClick:onClick,className:className},children)}function ModalCard(_a){var isVisible=_a.isVisible,onCancel=_a.onCancel,onSave=_a.onSave,city=_a.city;if(!city)return react_default.a.createElement(react_default.a.Fragment,null);var icon=city.icon,name=city.name,temperature=city.temperature,_b=Object(react.useState)(name),cityName=_b[0],setCityName=_b[1],_c=Object(react.useState)(temperature),cityTemperature=_c[0],setCityTemperature=_c[1];Object(react.useEffect)(function(){setCityName(name),setCityTemperature(temperature)},[name,temperature]);var handleCityChange=Object(react.useCallback)(function(event){var value=event.target.value;setCityName(value)},[]),handleTemperatureChange=Object(react.useCallback)(function(event){var value=event.target.value;setCityTemperature(value)},[]);return react_default.a.createElement(modal.a,{title:"Card of city: "+name,visible:isVisible,onCancel:onCancel,footer:[react_default.a.createElement(Button,{key:1,disabled:!cityName||!cityTemperature,onClick:function(){return onSave(modal_card_assign(modal_card_assign({},city),{name:cityName,temperature:cityTemperature}))}},"Save"),react_default.a.createElement(Button,{key:2,type:"danger",onClick:onCancel},"Cancel")]},react_default.a.createElement("div",{className:modal_card_default.a.root},react_default.a.createElement("div",{className:modal_card_default.a.icon},react_default.a.createElement("img",{src:GET_WEATHER_ICON(icon),alt:"icon"})),react_default.a.createElement("div",{className:modal_card_default.a.controlls},react_default.a.createElement(input.a,{type:"text",value:cityName,readOnly:!1,onChange:handleCityChange}),react_default.a.createElement(input.a,{type:"text",value:cityTemperature,onChange:handleTemperatureChange}))))}function useTable(list,dispatch,pageType){var _a=Object(react.useState)(!1),isVisible=_a[0],toggleVisiblity=_a[1],_b=Object(react.useState)(),currentCity=_b[0],setCurrentCity=_b[1],onCancel=Object(react.useCallback)(function(){toggleVisiblity(!1)},[]),onSave=Object(react.useCallback)(function(city){dispatch(addCitySuccess(city)),toggleVisiblity(!1)},[]),showModal=Object(react.useCallback)(function(city){setCurrentCity(city),toggleVisiblity(!isVisible)},[]);return{dataSource:list.slice().sort(function(a,b){return a.position>b.position?-1:1}).filter(function(city){switch(pageType){case"DELETED":return!0===city.isDeleted;case"ACTIVE":return!1===city.isDeleted;default:return city}}),columns:[{title:"City",dataIndex:"city",key:"city",render:function(text,record){return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement(Button,{type:"link",onClick:function(){return showModal(record)}},record.name),react_default.a.createElement(ModalCard,{isVisible:isVisible,onCancel:onCancel,onSave:onSave,city:currentCity}))}},{title:"Icon",dataIndex:"icon",key:"icon",width:100,render:function(text,record){return react_default.a.createElement("img",{className:pages_default.a.icon,src:GET_WEATHER_ICON(record.icon),alt:"icon"})}},{title:"Temperature",dataIndex:"temperature",key:"temperature",width:100},{title:"Actions",dataIndex:"",key:"actions",render:function(text,record){return react_default.a.createElement("div",{className:pages_default.a.buttonGroup},react_default.a.createElement(Button,{icon:"caret-up",size:"small",onClick:function(){return dispatch({type:"MOVE_UP_CITY",payload:{id:record.id}})},className:pages_default.a.buttonItem},"Up"),react_default.a.createElement(Button,{icon:"caret-down",size:"small",onClick:function(){return dispatch({type:"MOVE_DOWN_CITY",payload:{id:record.id}})},className:pages_default.a.buttonItem},"Down"),react_default.a.createElement(Button,{icon:record.isDeleted?"select":"rest",type:record.isDeleted?"primary":"danger",size:"small",onClick:function(){return record.isDeleted?dispatch({type:"RESTORE_CITY",payload:{id:record.id}}):dispatch(function(id){return{type:"REMOVE_CITY",payload:{id:id}}}(record.id))},className:pages_default.a.buttonItem},record.isDeleted?"Restore":"Remove"))}}]}}function All(){var dispatch=Object(es.d)(),state=Object(es.e)(citiesSelector),list=state.list,isPending=state.isPending,_a=useTable(list,dispatch,"ALL"),dataSource=_a.dataSource,columns=_a.columns;return react_default.a.createElement("div",{className:pages_default.a.root},react_default.a.createElement(Table,{columns:columns,dataSource:dataSource,loading:isPending}))}function Active(){var dispatch=Object(es.d)(),state=Object(es.e)(citiesSelector),list=state.list,isPending=state.isPending,_a=useTable(list,dispatch,"ACTIVE"),dataSource=_a.dataSource,columns=_a.columns;return react_default.a.createElement("div",{className:pages_default.a.root},react_default.a.createElement(Table,{columns:columns,dataSource:dataSource,loading:isPending}))}function Deleted(){var dispatch=Object(es.d)(),state=Object(es.e)(citiesSelector),list=state.list,isPending=state.isPending,_a=useTable(list,dispatch,"DELETED"),dataSource=_a.dataSource,columns=_a.columns;return react_default.a.createElement("div",{className:pages_default.a.root},react_default.a.createElement(Table,{columns:columns,dataSource:dataSource,loading:isPending}))}function AppHeaderView(_a){var error=_a.error,onQueryChange=_a.onQueryChange,onSearch=_a.onSearch,query=_a.query;return react_default.a.createElement("div",{className:app_header_view_default.a.root},react_default.a.createElement("div",{className:app_header_view_default.a.error},error),react_default.a.createElement("div",{className:app_header_view_default.a.search},react_default.a.createElement(input.a,{placeholder:"input city name",onChange:onQueryChange,onPressEnter:onSearch,value:query}),react_default.a.createElement(es_button.a,{type:"primary",icon:"search",onClick:onSearch},"Search")))}function AppHeader(){var dispatch=Object(es.d)(),stateSearch=Object(es.e)(searchSelector),error=Object(es.e)(citiesSelector).error,query=stateSearch.query,appHeaderProps={error:error,onQueryChange:Object(react.useCallback)(function(event){var value=event.target.value;dispatch({type:"CHANGE_SEARCH_QUERY",payload:{query:value}})},[dispatch]),onSearch:Object(react.useCallback)(function(){var name;dispatch((name=query,function(dispatch){return dispatch(setPending(!0)),axios_default()("https://api.openweathermap.org/data/2.5/weather?q="+name+"&APPID=1139c17cf1905f5c00d7ed6c001fbc09&units=metric").then(function(res){return res.data}).then(function(data){var newCity={id:data.id,name:data.name,temperature:data.main.temp,position:0,isDeleted:!1,icon:data.weather[0].icon};dispatch(addCitySuccess(newCity)),dispatch({type:"CLEAR_QUERY"})}).catch(function(err){var preparedError="Unknown error";return err.response&&(preparedError=err.response.data.message),dispatch(addCityError(preparedError))}).finally(function(){return dispatch(setPending(!1))})}))},[dispatch,query]),query:query};return react_default.a.createElement(AppHeaderView,app_header_assign({},appHeaderProps))}function AppFooter(){return react_default.a.createElement("footer",{className:app_footer_default.a.root},react_default.a.createElement("div",{className:app_footer_default.a.footer},"weather 2019"))}function Tabs(_a){var onChange=_a.onChange,tabs=_a.tabs,content=_a.content,renderTabs=tabs.map(function(tab){return react_default.a.createElement(TabPane,{tab:tab.caption,key:tab.id},content)});return react_default.a.createElement("div",{className:tabs_default.a.root},react_default.a.createElement(es_tabs.a,{onChange:onChange,type:"card",size:"small"},renderTabs))}function AppContentView(_a){var onTabChange=_a.onTabChange,tabs=_a.tabs,children=_a.children;return react_default.a.createElement("div",{className:app_content_view_default.a.root},react_default.a.createElement(Tabs,{onChange:onTabChange,tabs:tabs}),react_default.a.createElement("div",{className:app_content_view_default.a.table},children))}function AppContent(_a){var children=_a.children,dispatch=Object(es.d)(),appContentProps={onTabChange:Object(react.useCallback)(function(activeTab){dispatch(Object(actions.d)("/"+activeTab))},[dispatch]),tabs:[{caption:"All",id:"all"},{caption:"Active",id:"active"},{caption:"Deleted",id:"deleted"}],children:children};return react_default.a.createElement(AppContentView,app_content_assign({},appContentProps))}var extendStatics,initialState,_super,pages=__webpack_require__(27),pages_default=__webpack_require__.n(pages),table=__webpack_require__(380),es_button=(__webpack_require__(213),__webpack_require__(29)),modal=(__webpack_require__(71),__webpack_require__(383)),input=__webpack_require__(382),modal_card=(__webpack_require__(358),__webpack_require__(164),__webpack_require__(91)),modal_card_default=__webpack_require__.n(modal_card),modal_card_assign=function(){return(modal_card_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},app_header_view=(__webpack_require__(366),__webpack_require__(92)),app_header_view_default=__webpack_require__.n(app_header_view),app_header_assign=function(){return(app_header_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},app_footer=__webpack_require__(121),app_footer_default=__webpack_require__.n(app_footer),actions=__webpack_require__(23),app_content_view=__webpack_require__(122),app_content_view_default=__webpack_require__.n(app_content_view),es_tabs=__webpack_require__(381),tabs_tabs=(__webpack_require__(376),__webpack_require__(182)),tabs_default=__webpack_require__.n(tabs_tabs),TabPane=es_tabs.a.TabPane,app_content_assign=function(){return(app_content_assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),app_store=Object(redux.d)(root_reducer(store_history),initialState,redux.a.apply(void 0,middlewares)),app_App=(_super=react_default.a.Component,__extends(App,_super),App.prototype.render=function(){return react_default.a.createElement(es.a,{store:app_store},react_default.a.createElement(esm.a,{history:getHistory(),context:es.b},react_default.a.createElement(Layout,null,react_default.a.createElement(Header,null,react_default.a.createElement(AppHeader,null)),react_default.a.createElement(Content,null,react_default.a.createElement(AppContent,null,react_default.a.createElement(react_router.d,null,react_default.a.createElement(react_router.b,{path:"/all",component:All}),react_default.a.createElement(react_router.b,{path:"/active",component:Active}),react_default.a.createElement(react_router.b,{path:"/deleted",component:Deleted}),react_default.a.createElement(react_router.a,{to:"/all"})))),react_default.a.createElement(Footer,null,react_default.a.createElement(AppFooter,null)))))},App);function App(){return null!==_super&&_super.apply(this,arguments)||this}var app=Object(root.hot)(app_App);Object(react_dom.render)(react_default.a.createElement(app,null),document.getElementById("reactContainer"))},91:function(module,exports,__webpack_require__){module.exports={root:"modal-card_root_1EiOk",icon:"modal-card_icon_2uuLk",controlls:"modal-card_controlls_1XH39"}},92:function(module,exports,__webpack_require__){module.exports={root:"app-header-view_root_3s5vH",search:"app-header-view_search_3nTcg",error:"app-header-view_error_2YXUY"}}},[[378,1,2]]]);
//# sourceMappingURL=bundle.chunk.js.map